<div class="prescriptions">
  <app-spinner *ngIf="isLoading"></app-spinner>
  <div class="prescriptions__title">
    <h2>Prescriptions</h2>
  </div>
  <div class="prescriptions__add-button">
    <button mat-raised-button (click)="addPrescription()">Add prescription</button>
  </div>

  <div class="prescriptions__list">
    <ul>
      <li
        *ngFor="let element of prescriptionStruct |
         paginate: {itemsPerPage: paginationOptions.size, currentPage: paginationOptions.pageNumber + 1}">
        <mat-expansion-panel>
          <mat-expansion-panel-header (click)="getPrescriptionItems(element.prescription.id)">
            <mat-panel-title>
              <div class="prescriptions__list__title">
                {{element.prescription.name}}
              </div>
            </mat-panel-title>
            <mat-panel-description>
              <div class="prescriptions__list__date">
                {{element.prescription.date}}
              </div>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="prescriptions__list__buttons">
            <button mat-raised-button (click)="addPrescriptionItem(element.prescription)">Add item</button>
            <button mat-raised-button (click)="deletePrescription(element.prescription.id)">Delete prescription</button>
          </div>
          <div class="prescriptions__list__items">
            <ul>
              <li *ngFor="let prescriptionItem of element.prescriptionItems">
                <span>Medicine: {{prescriptionItem.medicine.name}}</span>
                <span>Dosage: {{prescriptionItem.dosage}}</span>
                <span>Taking time: {{prescriptionItem.takingTime}}</span>
                <span>From {{prescriptionItem.startDate}} to {{prescriptionItem.endDate}}</span>
                <span>Duration: {{prescriptionItem.takingDurationDays}} days</span>
                <span>Description: {{prescriptionItem.description}}</span>
                <mat-checkbox [checked]="prescriptionItem.isReminderEnabled">Reminder</mat-checkbox>
              </li>
            </ul>
          </div>
        </mat-expansion-panel>
      </li>
    </ul>
  </div>
  <pagination-controls (pageChange)="changePage($event)"></pagination-controls>
</div>
