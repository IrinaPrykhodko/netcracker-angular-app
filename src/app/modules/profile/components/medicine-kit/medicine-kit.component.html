<div class="add-modal">
  <router-outlet></router-outlet>
</div>

<div class="search">
  <mat-form-field>
    <input matInput
           [(ngModel)]="searchText"
           type="search"
           name="search"
           placeholder="Search"/>
  </mat-form-field>
  <button mat-button (click)="onSearch()">Search</button>
</div>

<div class="kit">
  <ul class="medicine-instance">
    <li
      *ngFor="let medicineInstance of medicineKit | paginate: {itemsPerPage: paginationOptions.size, currentPage: paginationOptions.pageNumber+1}"
      [ngClass]="{
            'selected': medicineInstance === selectedMedicineInstance,
            'expired': medicineInstance.isExpired
          }"
      (click)="onSelected(medicineInstance)">
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <span>{{medicineInstance.medicine.name}}</span>
            </mat-panel-title>
            <mat-panel-description>
              <span>{{medicineInstance.medicine.manufacturer}}</span>
              <span>{{medicineInstance.selfLife}}</span>
              <span>{{medicineInstance.amount}}</span>
            </mat-panel-description>
          </mat-expansion-panel-header>

          <ng-container *ngIf="!medicineInstance.isExpired; else expired">
            <mat-form-field>
              <input
                #selfLife
                matInput
                type="Date"
                value="{{medicineInstance.selfLife}}"
                placeholder="Self life">
            </mat-form-field>

            <mat-form-field>
              <input
                #amount
                matInput
                type="number"
                value="{{medicineInstance.amount}}"
                pattern="[0-9]{4}"
                placeholder="Amount">
            </mat-form-field>

            <button
              mat-raised-button (click)="submit(selfLife.valueAsDate, amount.valueAsNumber)">Confirm
            </button>

            <button
              mat-raised-button (click)="delete(medicineInstance.id)">Delete
            </button>



          </ng-container>
          <ng-template #expired>
            <button
              mat-raised-button (click)="delete(medicineInstance.id)">Delete
            </button>
          </ng-template>
        </mat-expansion-panel>
      </mat-accordion>
    </li>
  </ul>

  <pagination-controls (pageChange)="pageChange($event)"></pagination-controls>
</div>

